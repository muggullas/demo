Error: Invalid multi-line string

  on modules/aws-athena/variables.tf line 17, in variable "queries":
  17:     "CREATE EXTERNAL TABLE IF NOT EXISTS database1.table1(
  18:       status string COMMENT 'Status of the task',

Quoted strings may not be split over multiple lines. To produce a multi-line
string, either use the \n escape to represent a newline character or use the
"heredoc" multi-line template syntax.


Error: Unterminated template string

  on modules/aws-athena/variables.tf line 17, in variable "queries":
  17:     "CREATE EXTERNAL TABLE IF NOT EXISTS database1.table1(
  18:       status string COMMENT 'Status of the task',

No closing marker was found for the string.


Error: Invalid multi-line string

  on modules/aws-athena/variables.tf line 18, in variable "queries":
  18:       status string COMMENT 'Status of the task',
  19:       assignee string COMMENT 'Assignee of the task',

Quoted strings may not be split over multiple lines. To produce a multi-line
string, either use the \n escape to represent a newline character or use the
"heredoc" multi-line template syntax.


Error: Invalid multi-line string

  on modules/aws-athena/variables.tf line 19, in variable "queries":
  19:       assignee string COMMENT 'Assignee of the task',
  20:       new_feature_link string COMMENT 'Link to the new feature',

Quoted strings may not be split over multiple lines. To produce a multi-line
string, either use the \n escape to represent a newline character or use the
"heredoc" multi-line template syntax.


Error: Invalid multi-line string

  on modules/aws-athena/variables.tf line 20, in variable "queries":
  20:       new_feature_link string COMMENT 'Link to the new feature',
  21:       updated string COMMENT 'Updated timestamp',

Quoted strings may not be split over multiple lines. To produce a multi-line
string, either use the \n escape to represent a newline character or use the
"heredoc" multi-line template syntax.


Error: Invalid multi-line string

  on modules/aws-athena/variables.tf line 21, in variable "queries":
  21:       updated string COMMENT 'Updated timestamp',
  22:       priority string COMMENT 'Priority of the task',

Quoted strings may not be split over multiple lines. To produce a multi-line
string, either use the \n escape to represent a newline character or use the
"heredoc" multi-line template syntax.


Error: Invalid multi-line string

  on modules/aws-athena/variables.tf line 22, in variable "queries":
  22:       priority string COMMENT 'Priority of the task',
  23:       insert_date string COMMENT 'Date of insertion',

Quoted strings may not be split over multiple lines. To produce a multi-line
string, either use the \n escape to represent a newline character or use the
"heredoc" multi-line template syntax.


Error: Invalid multi-line string

  on modules/aws-athena/variables.tf line 23, in variable "queries":
  23:       insert_date string COMMENT 'Date of insertion',
  24:       reporter string COMMENT 'Reporter of the task',

Quoted strings may not be split over multiple lines. To produce a multi-line
string, either use the \n escape to represent a newline character or use the
"heredoc" multi-line template syntax.


Error: Invalid multi-line string

  on modules/aws-athena/variables.tf line 24, in variable "queries":
  24:       reporter string COMMENT 'Reporter of the task',
  25:       resolutiondate string COMMENT 'Resolution date',

Quoted strings may not be split over multiple lines. To produce a multi-line
string, either use the \n escape to represent a newline character or use the
"heredoc" multi-line template syntax.


Error: Invalid multi-line string

  on modules/aws-athena/variables.tf line 25, in variable "queries":
  25:       resolutiondate string COMMENT 'Resolution date',
  26:       story_point BINARY COMMENT 'Story point as binary',

Quoted strings may not be split over multiple lines. To produce a multi-line
string, either use the \n escape to represent a newline character or use the
"heredoc" multi-line template syntax.


Error: Invalid multi-line string

  on modules/aws-athena/variables.tf line 26, in variable "queries":
  26:       story_point BINARY COMMENT 'Story point as binary',
  27:       created string COMMENT 'Creation timestamp',

Quoted strings may not be split over multiple lines. To produce a multi-line
string, either use the \n escape to represent a newline character or use the
"heredoc" multi-line template syntax.


Error: Invalid multi-line string

  on modules/aws-athena/variables.tf line 27, in variable "queries":
  27:       created string COMMENT 'Creation timestamp',
  28:       type string COMMENT 'Type of task',

Quoted strings may not be split over multiple lines. To produce a multi-line
string, either use the \n escape to represent a newline character or use the
"heredoc" multi-line template syntax.


Error: Invalid multi-line string

  on modules/aws-athena/variables.tf line 28, in variable "queries":
  28:       type string COMMENT 'Type of task',
  29:       identifier string COMMENT 'Task identifier',

Quoted strings may not be split over multiple lines. To produce a multi-line
string, either use the \n escape to represent a newline character or use the
"heredoc" multi-line template syntax.


Error: Invalid multi-line string

  on modules/aws-athena/variables.tf line 29, in variable "queries":
  29:       identifier string COMMENT 'Task identifier',
  30:       summary string COMMENT 'Task summary',

Quoted strings may not be split over multiple lines. To produce a multi-line
string, either use the \n escape to represent a newline character or use the
"heredoc" multi-line template syntax.


Error: Invalid multi-line string

  on modules/aws-athena/variables.tf line 30, in variable "queries":
  30:       summary string COMMENT 'Task summary',
  31:       sprint string COMMENT 'Sprint information',

Quoted strings may not be split over multiple lines. To produce a multi-line
string, either use the \n escape to represent a newline character or use the
"heredoc" multi-line template syntax.


Error: Invalid multi-line string

  on modules/aws-athena/variables.tf line 31, in variable "queries":
  31:       sprint string COMMENT 'Sprint information',
  32:       component string COMMENT 'Component information',

Quoted strings may not be split over multiple lines. To produce a multi-line
string, either use the \n escape to represent a newline character or use the
"heredoc" multi-line template syntax.


Error: Invalid multi-line string

  on modules/aws-athena/variables.tf line 32, in variable "queries":
  32:       component string COMMENT 'Component information',
  33:       resolution string COMMENT 'Resolution details'

Quoted strings may not be split over multiple lines. To produce a multi-line
string, either use the \n escape to represent a newline character or use the
"heredoc" multi-line template syntax.


Error: Invalid multi-line string

  on modules/aws-athena/variables.tf line 33, in variable "queries":
  33:       resolution string COMMENT 'Resolution details'
  34:     )

Quoted strings may not be split over multiple lines. To produce a multi-line
string, either use the \n escape to represent a newline character or use the
"heredoc" multi-line template syntax.


Error: Invalid multi-line string

  on modules/aws-athena/variables.tf line 34, in variable "queries":
  34:     )
  35:     PARTITIONED BY (year string, month string, day string)

Quoted strings may not be split over multiple lines. To produce a multi-line
string, either use the \n escape to represent a newline character or use the
"heredoc" multi-line template syntax.


Error: Invalid multi-line string

  on modules/aws-athena/variables.tf line 35, in variable "queries":
  35:     PARTITIONED BY (year string, month string, day string)
  36:     ROW FORMAT SERDE 'org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe'

Quoted strings may not be split over multiple lines. To produce a multi-line
string, either use the \n escape to represent a newline character or use the
"heredoc" multi-line template syntax.


Error: Invalid multi-line string

  on modules/aws-athena/variables.tf line 36, in variable "queries":
  36:     ROW FORMAT SERDE 'org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe'
  37:     STORED AS INPUTFORMAT 'org.apache.hadoop.hive.ql.io.SymlinkTextInputFormat'

Quoted strings may not be split over multiple lines. To produce a multi-line
string, either use the \n escape to represent a newline character or use the
"heredoc" multi-line template syntax.


Error: Invalid multi-line string

  on modules/aws-athena/variables.tf line 37, in variable "queries":
  37:     STORED AS INPUTFORMAT 'org.apache.hadoop.hive.ql.io.SymlinkTextInputFormat'
  38:     OUTPUTFORMAT 'org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat'

Quoted strings may not be split over multiple lines. To produce a multi-line
string, either use the \n escape to represent a newline character or use the
"heredoc" multi-line template syntax.


Error: Invalid multi-line string

  on modules/aws-athena/variables.tf line 38, in variable "queries":
  38:     OUTPUTFORMAT 'org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat'
  39:     LOCATION 's3://gold-datdl-glue-lakeformat/grip_t_dot_open/_symlink_format_manifest/';"

Quoted strings may not be split over multiple lines. To produce a multi-line
string, either use the \n escape to represent a newline character or use the
"heredoc" multi-line template syntax.


modules/aws-athena/varaibles.tf:

# Define the SQL queries you want to execute
variable "queries" {
  type    = list(string)
  default = [
    "CREATE EXTERNAL TABLE IF NOT EXISTS database1.table1(
      status string COMMENT 'Status of the task',
      assignee string COMMENT 'Assignee of the task',
      new_feature_link string COMMENT 'Link to the new feature',
      updated string COMMENT 'Updated timestamp',
      priority string COMMENT 'Priority of the task',
      insert_date string COMMENT 'Date of insertion',
      reporter string COMMENT 'Reporter of the task',
      resolutiondate string COMMENT 'Resolution date',
      story_point BINARY COMMENT 'Story point as binary',
      created string COMMENT 'Creation timestamp',
      type string COMMENT 'Type of task',
      identifier string COMMENT 'Task identifier',
      summary string COMMENT 'Task summary',
      sprint string COMMENT 'Sprint information',
      component string COMMENT 'Component information',
      resolution string COMMENT 'Resolution details'
    )
    PARTITIONED BY (year string, month string, day string)
    ROW FORMAT SERDE 'org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe'
    STORED AS INPUTFORMAT 'org.apache.hadoop.hive.ql.io.SymlinkTextInputFormat'
    OUTPUTFORMAT 'org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat'
    LOCATION 's3://gold-datdl-glue-lakeformat/grip_t_dot_open/_symlink_format_manifest/';"
  ]
}

modules/aws-athena/main.tf

resource "aws_athena_workgroup" "athena_workgroup" {
  name  = "${var.namespace[1]}_table_glue_${var.stage}_${var.region_short_code}"
  state = "ENABLED"

  configuration {
    enforce_workgroup_configuration    = false
    publish_cloudwatch_metrics_enabled = true

    result_configuration {
      output_location = "s3://dat-infra-default-athena/results_query/"
    }
  }
}

resource "aws_athena_named_query" "example_named_query" {
  count    = length(var.queries)
  name     = "example_query"
  database = "database1"
  query    = var.queries[count.index]
  workgroup = aws_athena_workgroup.athena_workgroup.name
}

main.tf

module "aws_athena" {
  source = "./modules/aws-athena"
  stage  = var.stage
  namespace = var.namespace
  region_short_code =  var.region_short_code
}



